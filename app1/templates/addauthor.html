{%extends 'base.html'%}
{%load static%}

{% block body_block%}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script> 

<div class="grid d-flex text-center w-100 bg-gradii" style="height: 100px; width: 100px; column-gap: 50px;">
  <div class="g-col-6 border border-dark w-50" style="height: 150px; width: 100px; position: relative; background-image: linear-gradient(43deg, #5ee3ed 0%, #aa7cc2cb 46%);";>
    <div class="row" >
      <div class="col-6 p-4">
        <p class="text-start ms-4">TOTAL AUTHORS</p>
        <h3>{{total_authors}}</h3>

       
      </div>
      <div class="col-6 p-4">
        <img src="{%static 'images/pen icon.png'%}" style="width: 70px; " class="me-0">
      </div>
    </div>
    </div>

  <div class="g-col-6 border border-dark w-50" style="height: 150px; width: 100px; background-image: linear-gradient(43deg, #ed5858 0%, #f37af3cb 46%);";>
    <div class="row">
      <div class="col-6 p-4">
        <P class="text-start ms-4">TOTAL BOOKS</P>
        <h1>{{total_books}}</h1>
      </div>
      <div class="col-6 p-4">
        <img src="{%static 'images/book-icon-by-sonoftroll-26.png'%}" style="width: 70px; " class="me-0">

      </div>
    </div>

  
  </div>
 
</div>



  <div class="container mt-5">
    <div class="d-flex flex-wrap ">
      <div class="me-auto p-2">
        <form method="get" action="{% url 'author-add' %}">
          <div class="input-group mb-3 bg-white p-1 rounded-pill w-80 border border-1">
              <input type="text" name="q" placeholder="Search Author.." class=" rounded-pill form-control border border-0 bg-white" style="border: 0;"/>
              <button type="submit" class="border border-0 bg-white"><i class="fa-solid fa-magnifying-glass"></i></button>
          </div>
        </form>
      </div>
      <div class=" p-2">      
        <button type="button" class="btn btn-primary rounded-pill ms-200px" data-bs-toggle="modal" data-bs-target="#exampleModal">Add Author</button>
      </div>
    </div>
  </div>
    <!-- Button trigger modal -->
    <div class="container mt-2 w-100">
      <table class="table table-bordered text-center">
        <tr>
          <td>No</td>
          <td>Author Name</td>
          <td>User Name</td>
          <td>Email</td>
          <td>Action</td>
          <td>Status</td>
        </tr>

        {%for au in page_obj.object_list%}
        <tr>
          <td>{{au.id}}</td>
          <td>{{au.author_name}}</td>
          <td>{{au.user_name}}</td>
          <td>{{au.email}}</td>
          <td>
            <i class="fa-regular fa-pen-to-square"></i>
            <a href="{%url 'author-detail' au.id%}"><i class="fa-regular fa-eye" style="color: #d9088c"></i></a>
          </td>
          <td>
            <div class="form-check form-switch form-switch-padding-start:5">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked"checked/>
              <label class="form-check-label" for="flexSwitchCheckChecked"></label>
            </div>
          </td>
        </tr>
        {%endfor%}
      </table>
    </div>
    <!-- =================================================================================== -->
   

    <!-- ==========================================popup======================================= -->

    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <div class="container" style="width: 50%">
              <form action="" method="post" enctype="multipart/form-data">
                {%csrf_token%}
                <!-- {{form.as_p}} -->
                <div class="row">
                  <div class="mb-3 mt-3">
                    <label for="" class="form-label">Author Name</label>
                    <input type="text" placeholder="Type your username" class="form-control border rounded-pill border-dark-subtle" name="author_name" required/>
                  </div>
                </div>

                <div class="row">
                  <div class="mb-3 mt-3">
                    <label for="" class="form-label">User Name</label>
                    <input type="text" placeholder="Type your username" class="form-control border rounded-pill border-dark-subtle"name="user_name" required/>
                  </div>
                </div>

                <div class="row">
                  <div class="mb-3 mt-3">
                    <label for="" class="form-label">Email</label>
                    <input
                      type="email"
                      placeholder="Type your email"
                      class="form-control border rounded-pill border-dark-subtle"
                      name="email" required
                    />
                  </div>
                </div>

                <div class="row">
                  <div class="col-6">
                    <button class="form-control btn text-black border border-dark btn-grad rounded-pill" type="submit" data-bs-dismiss="modal" onclick="cancelForm()">Cancel</button>
                  </div>
                  <div class="col-6">
                    <button class="form-control btn text-white btn-grad rounded-pill btn-info" type="submit">Add</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- =========================================pagination=================================================== -->
    <div class="container">
      <div class="row my-5">
        <div class="col-md-4 offset-md-3 ">
          <p class="text-center">Page: {{ page_obj.number}}/{{page_obj.paginator.num_pages}}</p>
          <nav aria-label="Page navigation example">
            <ul class="pagination text-center justify-content-center ">
              <li class="page-item ">
                {%if page_obj.has_previous%}

                
              <a class="page-link" href="{%url 'author-add'%}?page={{page_obj.previous_page_number}}">Previous</a>
              {%endif%}
                </li>
                {%for num_page in page_obj.paginator.page_range%}
                <br />
                {% if page_obj.number == num_page %}
              <li class="page-item"><a class="page-link" href="{%url 'author-add'%}?page={{num_page}}">{{num_page}}</a></li>
              {%endif%}
              <br />
              {%endfor%}

             
              <li class="page-item">
                {%if page_obj.has_next%}
                <a class="page-link" href="{%url 'author-add'%}?page={{page_obj.next_page_number}}">Next</a>
                {%endif%}
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <!-- ================================================================================== -->
  
  <script>
    function cancelForm() {
      // Assuming your modal has an ID of 'myModal'
      $("#myModal").modal("hide");
    }
  </script>
{%endblock%}
